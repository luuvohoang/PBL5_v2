{"ast":null,"code":"import * as signalR from '@microsoft/signalr';\nclass ChatService {\n  constructor() {\n    this.connection = new signalR.HubConnectionBuilder().withUrl('http://localhost:5000/chatHub').withAutomaticReconnect().build();\n    this.connection.onclose(() => {\n      console.log('SignalR Connection Closed');\n    });\n    this.startConnection();\n  }\n  async startConnection() {\n    try {\n      await this.connection.start();\n      console.log('SignalR Connected');\n    } catch (err) {\n      console.error('SignalR Connection Error: ', err);\n      setTimeout(() => this.startConnection(), 5000);\n    }\n  }\n  async joinChat(userId) {\n    try {\n      if (this.connection.state !== signalR.HubConnectionState.Connected) {\n        await this.connection.start();\n      }\n      await this.connection.invoke('JoinChat', userId.toString());\n    } catch (error) {\n      console.error('Error joining chat:', error);\n      throw error;\n    }\n  }\n  onReceiveMessage(callback) {\n    this.connection.on('ReceiveMessage', callback);\n  }\n  removeReceiveMessageListener() {\n    this.connection.off('ReceiveMessage');\n  }\n}\nexport const chatService = new ChatService();","map":{"version":3,"names":["signalR","ChatService","constructor","connection","HubConnectionBuilder","withUrl","withAutomaticReconnect","build","onclose","console","log","startConnection","start","err","error","setTimeout","joinChat","userId","state","HubConnectionState","Connected","invoke","toString","onReceiveMessage","callback","on","removeReceiveMessageListener","off","chatService"],"sources":["C:/Users/GIGABYTE/Desktop/PBL5/project1/src/services/chatService.js"],"sourcesContent":["import * as signalR from '@microsoft/signalr';\r\n\r\nclass ChatService {\r\n    constructor() {\r\n        this.connection = new signalR.HubConnectionBuilder()\r\n            .withUrl('http://localhost:5000/chatHub')\r\n            .withAutomaticReconnect()\r\n            .build();\r\n\r\n        this.connection.onclose(() => {\r\n            console.log('SignalR Connection Closed');\r\n        });\r\n\r\n        this.startConnection();\r\n    }\r\n\r\n    async startConnection() {\r\n        try {\r\n            await this.connection.start();\r\n            console.log('SignalR Connected');\r\n        } catch (err) {\r\n            console.error('SignalR Connection Error: ', err);\r\n            setTimeout(() => this.startConnection(), 5000);\r\n        }\r\n    }\r\n\r\n    async joinChat(userId) {\r\n        try {\r\n            if (this.connection.state !== signalR.HubConnectionState.Connected) {\r\n                await this.connection.start();\r\n            }\r\n            await this.connection.invoke('JoinChat', userId.toString());\r\n        } catch (error) {\r\n            console.error('Error joining chat:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    onReceiveMessage(callback) {\r\n        this.connection.on('ReceiveMessage', callback);\r\n    }\r\n\r\n    removeReceiveMessageListener() {\r\n        this.connection.off('ReceiveMessage');\r\n    }\r\n}\r\n\r\nexport const chatService = new ChatService();\r\n"],"mappings":"AAAA,OAAO,KAAKA,OAAO,MAAM,oBAAoB;AAE7C,MAAMC,WAAW,CAAC;EACdC,WAAWA,CAAA,EAAG;IACV,IAAI,CAACC,UAAU,GAAG,IAAIH,OAAO,CAACI,oBAAoB,CAAC,CAAC,CAC/CC,OAAO,CAAC,+BAA+B,CAAC,CACxCC,sBAAsB,CAAC,CAAC,CACxBC,KAAK,CAAC,CAAC;IAEZ,IAAI,CAACJ,UAAU,CAACK,OAAO,CAAC,MAAM;MAC1BC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;IAC5C,CAAC,CAAC;IAEF,IAAI,CAACC,eAAe,CAAC,CAAC;EAC1B;EAEA,MAAMA,eAAeA,CAAA,EAAG;IACpB,IAAI;MACA,MAAM,IAAI,CAACR,UAAU,CAACS,KAAK,CAAC,CAAC;MAC7BH,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;IACpC,CAAC,CAAC,OAAOG,GAAG,EAAE;MACVJ,OAAO,CAACK,KAAK,CAAC,4BAA4B,EAAED,GAAG,CAAC;MAChDE,UAAU,CAAC,MAAM,IAAI,CAACJ,eAAe,CAAC,CAAC,EAAE,IAAI,CAAC;IAClD;EACJ;EAEA,MAAMK,QAAQA,CAACC,MAAM,EAAE;IACnB,IAAI;MACA,IAAI,IAAI,CAACd,UAAU,CAACe,KAAK,KAAKlB,OAAO,CAACmB,kBAAkB,CAACC,SAAS,EAAE;QAChE,MAAM,IAAI,CAACjB,UAAU,CAACS,KAAK,CAAC,CAAC;MACjC;MACA,MAAM,IAAI,CAACT,UAAU,CAACkB,MAAM,CAAC,UAAU,EAAEJ,MAAM,CAACK,QAAQ,CAAC,CAAC,CAAC;IAC/D,CAAC,CAAC,OAAOR,KAAK,EAAE;MACZL,OAAO,CAACK,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3C,MAAMA,KAAK;IACf;EACJ;EAEAS,gBAAgBA,CAACC,QAAQ,EAAE;IACvB,IAAI,CAACrB,UAAU,CAACsB,EAAE,CAAC,gBAAgB,EAAED,QAAQ,CAAC;EAClD;EAEAE,4BAA4BA,CAAA,EAAG;IAC3B,IAAI,CAACvB,UAAU,CAACwB,GAAG,CAAC,gBAAgB,CAAC;EACzC;AACJ;AAEA,OAAO,MAAMC,WAAW,GAAG,IAAI3B,WAAW,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}